# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

stages:
#  - stage: Build
#    jobs:
#    - job: Build
#      pool:
#        vmImage: 'ubuntu-latest'
#      steps:
#        - task: Maven@3
#          inputs:
#            mavenPomFile: 'pom.xml'
#            mavenOptions: '-Xmx3072m'
#            javaHomeOption: 'JDKVersion'
#            jdkVersionOption: '1.8'
#            jdkArchitectureOption: 'x64'
#            publishJUnitResults: true
#            testResultsFiles: '**/surefire-reports/TEST-*.xml'
#            goals: 'package'

#  - stage: UAT
#    jobs: 
#    - deployment:  
#      environment: UAT
#      condition: and(succeeded(), eq(variables['deploy_uat'], 'true')) 
#    
#      pool:
#        vmImage: 'ubuntu-latest'

#      strategy:
#          runOnce:
#              deploy:
#                steps:
#                - bash: echo "Hello UAT"

#  - stage: Prod1
#    jobs:
#    - deployment:  
#      environment: Prod1
#      condition: and(succeeded(), eq(variables['deploy_prod1'], 'true')) 
    
#      pool:
#        vmImage: 'ubuntu-latest'

#      strategy:
#          runOnce:
#              deploy:
#                steps:
#                - bash: echo "Hello Prod1"

  - stage: Prod2
    jobs:
    - template: deployment.yml  # Template reference
      parameters:
        env: Prod2
        pool: 'TSTWS01'
